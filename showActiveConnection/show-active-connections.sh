#/bin/bash
function detect(){
	var=$(python3 /opt/inject-port-in-ss.py -p $1)
	eval "$var"
}

echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
echo "                                                                                                           "
echo " ______     __  __     ______     __     __                                                                "
echo '/\  ___\   /\ \_\ \   /\  __ \   /\ \  _ \ \                                                               '
echo '\ \___  \  \ \  __ \  \ \ \/\ \  \ \ \/ ".\ \                                                              '
echo ' \/\_____\  \ \_\ \_\  \ \_____\  \ \__/".~\_\                                                             '
echo "  \/_____/   \/_/\/_/   \/_____/   \/_/   \/_/                                                             "
echo "                                                                                                           "
echo " ______     ______     ______   __     __   __   ______                                                    "
echo "/\  __ \   /\  ___\   /\__  _\ /\ \   /\ \ / /  /\  ___\                                                   "
echo "\ \  __ \  \ \ \____  \/_/\ \/ \ \ \  \ \ \'/   \ \  __\                                                   "
echo " \ \_\ \_\  \ \_____\    \ \_\  \ \_\  \ \__|    \ \_____\                                                 "
echo "  \/_/\/_/   \/_____/     \/_/   \/_/   \/_/      \/_____/                                                 "
echo "                                                                                                           "
echo " ______     ______     __   __     __   __     ______     ______     ______   __     ______     __   __    "
echo '/\  ___\   /\  __ \   /\ "-.\ \   /\ "-.\ \   /\  ___\   /\  ___\   /\__  _\ /\ \   /\  __ \   /\ "-.\ \   '
echo "\ \ \____  \ \ \/\ \  \ \ \-.  \  \ \ \-.  \  \ \  __\   \ \ \____  \/_/\ \/ \ \ \  \ \ \/\ \  \ \ \-.  \  "
echo ' \ \_____\  \ \_____\  \ \_\\"\_\  \ \_\\"\_\  \ \_____\  \ \_____\    \ \_\  \ \_\  \ \_____\  \ \_\\"\_\ '
echo "  \/_____/   \/_____/   \/_/ \/_/   \/_/ \/_/   \/_____/   \/_____/     \/_/   \/_/   \/_____/   \/_/ \/_/ "
echo "                                                                                                           "
echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"


# Check for given argument
if [ $# -eq 0 ]
then
	echo -e "You need to specify the target port.\n"
	echo -e "Usage:"
	echo -e "\t$0 <port>"
	exit 1
elif [ $# -eq 1 ]
then
	detect $1
else
	echo -e "Too many arguments given."
	exit 1
fi
